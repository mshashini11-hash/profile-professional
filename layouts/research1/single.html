{{ define "main" }}

<style>
  /* Apply Inter for main content; keep blockquotes serif */
  section, main, main p, main li, main span, main a, main figcaption {
    font-family: 'Inter', sans-serif;
    font-size: 16px; /* body text */
    line-height: 1.8;
  }

  main h1 {
    font-size: 36px; /* main title */
  }

  main h2 {
    font-size: 28px; /* subtopics or section headings */
  }

  main h3 {
    font-size: 24px;
  }

  main h4, main h5, main h6 {
    font-size: 20px;
  }

  blockquote.intro-quote, blockquote {
    font-family: Georgia, Cambria, "Times New Roman", Times, serif;
    font-size: 20px;
    font-style: italic;
    text-align: center;
    margin-bottom: 1.5rem;
    color: #4a4a4a;
  }

  a {
    transition: all 0.2s ease-in-out;
  }
</style>

<section class="py-12 relative">

  <!-- Background behind main title -->
  <div class="absolute inset-x-0 top-0 h-36 md:h-34">
    <img src="/uploads/stacked-peaks.svg" class="w-full h-full object-cover opacity-60" />
    <div class="absolute inset-0 bg-gradient-to-b from-black/40 to-transparent"></div>
  </div>

  <div class="container mx-auto px-4 relative z-10">

    <!-- Main title -->
    {{ with .Title }}
      <h1 class="text-3xl md:text-4xl font-extrabold mb-8 text-center text-white drop-shadow-lg relative z-10">{{ . }}</h1>
    {{ end }}

    <!-- Project Image -->
    {{ with .Params.image }}
      <img src="{{ . }}" alt="{{ .Title }}" class="w-full max-w-4xl mx-auto h-64 object-cover rounded-lg mb-6">
    {{ end }}

    <!-- Project Content -->
    <div class="prose max-w-4xl mx-auto">
      {{ .Content }}
    </div>

    <!-- Topology papers -->
    <h2 class="text-2xl md:text-3xl font-bold mb-4 text-[#18453B] mt-12">Topology</h2>
    <ol class="list-decimal list-inside space-y-1 mb-8">
      {{ $top := where site.RegularPages "Section" "topology" }}
      {{ range $top }}
        <li class="text-gray-800 text-sm md:text-base">
          {{ if .Params.citation }}
            {{ .Params.citation | safeHTML }}
          {{ else }}
            <strong>{{ .Title }}</strong>
            {{ with .Params.authors }} ({{ delimit . ", " }}){{ end }}.
            {{ with .Params.year }} ({{ . }}).{{ end }}
            {{ with .Params.journal }} <em>{{ . }}</em>,{{ end }}
            {{ with .Params.volume }} Vol. {{ . }},{{ end }}
            {{ with .Params.issue }} Issue {{ . }},{{ end }}
            {{ with .Params.pages }} pp. {{ . }}.{{ end }}
            {{ with .Params.doi }} DOI: <a href="{{ . }}" class="text-blue-600 font-bold hover:underline">{{ . }}</a>{{ end }}
          {{ end }}
          {{ with .Params.links }}
            <span class="space-x-2">
              {{ range . }}
                {{ if .name }}
                  <a href="{{ .url }}" target="_blank" class="text-blue-600 font-bold hover:underline">{{ .name }}</a>
                {{ end }}
              {{ end }}
            </span>
          {{ end }}
        </li>
      {{ end }}
    </ol>

    <!-- Education papers -->
    <h2 class="text-2xl md:text-3xl font-bold mb-4 text-[#18453B]">Education</h2>
    <ol class="list-decimal list-inside space-y-1 mb-8">
      {{ $edu := where site.RegularPages "Section" "education" }}
      {{ range $edu }}
        <li class="text-gray-800 text-sm md:text-base">
          {{ if .Params.citation }}
            {{ .Params.citation | safeHTML }}
          {{ else }}
            <strong>{{ .Title }}</strong>
            {{ with .Params.authors }} ({{ delimit . ", " }}){{ end }}.
            {{ with .Params.year }} ({{ . }}).{{ end }}
            {{ with .Params.journal }} <em>{{ . }}</em>,{{ end }}
            {{ with .Params.volume }} Vol. {{ . }},{{ end }}
            {{ with .Params.issue }} Issue {{ . }},{{ end }}
            {{ with .Params.pages }} pp. {{ . }}.{{ end }}
            {{ with .Params.doi }} DOI: <a href="{{ . }}" class="text-blue-600 font-bold hover:underline">{{ . }}</a>{{ end }}
          {{ end }}
          {{ with .Params.links }}
            <span class="space-x-2">
              {{ range . }}
                {{ if .name }}
                  <a href="{{ .url }}" target="_blank" class="text-blue-600 font-bold hover:underline">{{ .name }}</a>
                {{ end }}
              {{ end }}
            </span>
          {{ end }}
        </li>
      {{ end }}
    </ol>

    <!-- Guest Talks -->
    <h2 class="text-2xl md:text-3xl font-bold mb-4 text-[#18453B]">Guest Talks</h2>
    <div class="space-y-3">
      {{ $talks := where site.RegularPages "Section" "guesttalks" }}
      {{ range $talks }}
        <div class="border-l-4 border-[#18453B] pl-4 pb-2" x-data="{ open: false }">
          
          <!-- Talk title -->
          <button class="w-full text-left text-lg md:text-xl font-semibold text-[#18453B]" @click="open = !open">
            {{ .Title }}
            <span x-text="open ? '▼' : '▶'" class="ml-2"></span>
          </button>

          <!-- Collapsible content -->
          <div x-show="open" x-transition class="mt-2 pl-4">
            
            {{ with .Params.date }}<div class="text-gray-700 text-sm md:text-base">Date: {{ . }}</div>{{ end }}
            {{ with .Params.event }}<div class="text-gray-700 text-sm md:text-base">Event: {{ . }}</div>{{ end }}

            {{ with .Params.links }}
              <div class="mt-2 space-x-2">
                {{ range . }}
                  {{ if .name }}
                    <a href="{{ .url }}" target="_blank" class="text-blue-600 font-bold hover:underline text-sm md:text-base">{{ .name }}</a>
                  {{ end }}
                {{ end }}
              </div>
            {{ end }}

            {{ with .Params.image }}
              <div class="mt-2">
                <img src="{{ . }}" alt="{{ .Title }}" class="w-full max-w-md rounded-lg shadow-md">
              </div>
            {{ end }}

            {{ with .Params.summary }}
              <p class="mt-2 text-gray-800 text-sm md:text-base">{{ . }}</p>
            {{ end }}

          </div>
        </div>
      {{ end }}
    </div>

  </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
{{ end }}



