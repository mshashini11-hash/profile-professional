{{ define "main" }}
<!-- Load Inter -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<!-- Dark Mode CSS Variables -->
<style>
  :root {
    --text-color: #1C1C1C;
    --heading-color: #18453B;
    --link-color: #18453B;
    --bg-color: #ffffff;
    --meta-color: #4a4a4a;
    --caption-color: #555555;
  }

  @media (prefers-color-scheme: dark) {
    :root {
      --text-color: #f0f0f0;
      --heading-color: #a5f3fc;
      --link-color: #38bdf8;
      --bg-color: #121212;
      --meta-color: #cbd5e1;
      --caption-color: #d1d5db;
    }
  }

  body {
    color: var(--text-color);
    background-color: var(--bg-color);
  }

  h1, h2, h3, h4, h5, h6 {
    color: var(--heading-color);
  }

  p, span, li {
    color: var(--text-color);
  }

  a {
    color: var(--link-color);
    transition: color 0.2s ease-in-out;
  }

  a:hover {
    text-decoration: underline;
  }

  .text-gray-700 { color: var(--meta-color) !important; }
  .text-gray-600 { color: var(--caption-color) !important; }
</style>

<section class="relative py-12 min-h-screen">

  <!-- Background behind main title -->
  <div class="absolute inset-x-0 top-0 h-32 md:h-28">
    <img src="/uploads/stacked-peaks.svg" class="w-full h-full object-cover opacity-60" />
    <div class="absolute inset-0 bg-gradient-to-b from-black/40 to-transparent"></div>
  </div>

  <!-- Content -->
  <div class="container mx-auto px-4 relative z-10">

    <!-- Main Page Title -->
    {{ with .Title }}
      <h1 class="text-3xl md:text-4xl font-extrabold mb-8 text-center drop-shadow-lg relative z-10">{{ . }}</h1>
    {{ end }}

    <!-- Loop over subtopics -->
    {{ range .Params.subtopics }}
      <h2 class="text-2xl md:text-3xl font-bold mb-6">{{ .title }}</h2>

      {{ range .universities }}
        <div class="mb-10">

          <!-- University Name -->
          <h3 class="text-1xl md:text-2xl font-bold mb-4">{{ .name }}</h3>

          <!-- Flex: left = text, right = image -->
          <div class="flex flex-col md:flex-row md:items-start md:space-x-6">

            <!-- Left: Text info for all items -->
            <div class="flex-1 space-y-4">
              {{ range .items }}
                <div class="p-4 rounded-xl shadow-md border-l-4" style="border-left-color: var(--heading-color); background-color: var(--bg-color)">
                  <span class="block text-xl md:text-1xl font-semibold">{{ .title }}</span>
                  <span class="text-gray-700">{{ .date }}</span>
                  {{ if .description }}
                    <p class="text-gray-600 mt-2">{{ .description }}</p>
                  {{ end }}
                  {{ if .url }}
                    <a href="{{ .url }}" target="_blank" class="hover:underline mt-1 inline-block">[link]</a>
                  {{ end }}
                </div>
              {{ end }}
            </div>

            <!-- Right: First available image -->
            {{ $firstImage := "" }}
            {{ range .items }}
              {{ if .image }}
                {{ $firstImage = .image }}
                {{ break }}
              {{ end }}
            {{ end }}

            {{ if $firstImage }}
            <div class="mt-4 md:mt-0 flex-shrink-0 md:self-start self-center">
              <img src="{{ $firstImage }}" alt="University Image"
                   class="w-48 h-auto md:w-64 lg:w-72 object-contain rounded-lg shadow-lg">
              <p class="text-center text-gray-600 text-sm mt-2">Photo taken on the day of the TA Award ceremony.</p>
            </div>
            {{ end }}

          </div>

        </div>
      {{ end }}

    {{ end }}

  </div>
</section>
{{ end }}
























